
> storycraft@0.1.0 dev
> next dev

  ‚ñ≤ Next.js 14.2.31
  - Local:        http://localhost:3000
  - Environments: .env

 ‚úì Starting...
 ‚úì Ready in 1254ms
 ‚óã Compiling / ...
 ‚úì Compiled / in 1838ms (2230 modules)
Component rendered
 GET / 200 in 2134ms
 ‚úì Compiled in 284ms (767 modules)
Component rendered
 GET / 200 in 21ms
Component rendered
 GET / 200 in 23ms
 ‚úì Compiled /api/health in 381ms (1493 modules)
 POST /api/health 400 in 435ms
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 0
   Average Response Time: 0.00ms
   Error Rate: 0.00%
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 0
   Average Response Time: 0.00ms
   Error Rate: 0.00%
Component rendered
 GET / 200 in 187ms
 ‚óã Compiling /favicon.ico ...
 ‚úì Compiled /favicon.ico in 813ms (2251 modules)
 GET /favicon.ico 200 in 743ms
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 1028ms
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 0
   Average Response Time: 0.00ms
   Error Rate: 0.00%
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 0
   Average Response Time: 0.00ms
   Error Rate: 0.00%
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 0
   Average Response Time: 0.00ms
   Error Rate: 0.00%
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 0
   Average Response Time: 0.00ms
   Error Rate: 0.00%
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 0
   Average Response Time: 0.00ms
   Error Rate: 0.00%
Component rendered
 GET / 200 in 184ms
 GET /favicon.ico 200 in 26ms
Vertex AI Configuration:
  Project ID: fechen-aifactory
  Location: us-central1
  Veo Model: veo-001
  Gemini Model: gemini-pro
  GCS Videos Storage URI: Not set
  YouTube API Key: Set
Initializing Gemini Service with config: {
  projectId: 'fechen-aifactory',
  location: 'us-central1',
  model: 'gemini-2.5-flash',
  timeout: 60000
}
Vertex AI client initialized successfully
Attempting transcript extraction for video: Y20AZVzwpkQ
Checking transcript availability for video: Y20AZVzwpkQ
Found 1 caption track(s) available
Best caption track: zh-TW (standard)
Attempting caption download (likely to fail due to OAuth requirement)
Caption download requires OAuth 2.0 authentication (expected failure)
Caption content download failed (OAuth required) - this is expected behavior
No usable transcript content available for this video
Transcript not available, extracting enhanced metadata...
Extracting enhanced metadata for video: Y20AZVzwpkQ
Enhanced metadata extracted successfully
 POST / 200 in 739ms
Processing reference content with enhanced Gemini service
Source type: youtube
Has transcript: false
Description length: 727
Testing model availability: gemini-2.5-flash
Model gemini-2.5-flash responded in 960ms with: HEALTHY
Gemini Health Check: {
  healthy: true,
  model: 'gemini-2.5-flash',
  region: 'us-central1',
  responseTime: 960
}
Using enhanced description content
Content Complexity Analysis: {
  contentType: 'youtube_long_form',
  isShorts: false,
  shortsStyle: undefined,
  topicsComplexity: 'moderate',
  tokenAllocation: 6507,
  reasoning: 'Long-form YouTube video (23min) + +500 (moderate complexity) +7 (detailed description) = 6507 tokens'
}
Generating text with Gemini: {
  model: 'gemini-2.5-flash',
  promptLength: 2714,
  temperature: 0.3,
  maxTokens: 6507,
  timeout: 90000
}
Attempt 1/3 with model: gemini-2.5-flash
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 27ms
Generated text successfully in 27325ms: {
  textLength: 4508,
  textPreview: '```json\n' +
    '{\n' +
    '  "analysis": {\n' +
    '    "keyTopics": [\n' +
    '      "Sanchong real estate market analysis",\n' +
    '      "Id...'
}
Raw AI response length: 4508
First 200 chars: ```json
{
  "analysis": {
    "keyTopics": [
      "Sanchong real estate market analysis",
      "Identifying risky property investments",
      "Guidance for first-time homebuyers/investors",
      "
Direct parsing failed, trying cleaned parsing...
Cleaning JSON response, original length: 4508
Cleaned JSON length: 4477
JSON structure check - braces balanced: true
Cleaned parsing also failed, attempting manual extraction...
Manual fix failed, using regex extraction...
Regex extraction successful
Content processing completed in 28299ms
 POST / 200 in 28314ms
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 0
   Average Response Time: 0.00ms
   Error Rate: 0.00%
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 2
   Average Response Time: 14449.00ms
   Error Rate: 0.00%
 ‚úì Compiled in 885ms (2230 modules)
 ‚úì Compiled in 451ms (2231 modules)
 ‚úì Compiled in 501ms (2231 modules)
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 0
   Average Response Time: 0.00ms
   Error Rate: 0.00%
 ‚úì Compiled in 296ms (1464 modules)
 ‚úì Compiled in 195ms (1464 modules)
 ‚úì Compiled in 99ms (1464 modules)
 ‚úì Compiled in 380ms (2231 modules)
 ‚úì Compiled in 672ms (2231 modules)
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 2
   Average Response Time: 14449.00ms
   Error Rate: 0.00%
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 0
   Average Response Time: 0.00ms
   Error Rate: 0.00%
Component rendered
 GET / 200 in 112ms
Component rendered
 GET / 200 in 27ms
 ‚úì Compiled /_not-found in 402ms (2220 modules)
 GET /reference 404 in 462ms
Component rendered
 GET / 200 in 74ms
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 2
   Average Response Time: 14449.00ms
   Error Rate: 0.00%
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 0
   Average Response Time: 0.00ms
   Error Rate: 0.00%
Vertex AI Configuration:
  Project ID: fechen-aifactory
  Location: us-central1
  Veo Model: veo-001
  Gemini Model: gemini-pro
  GCS Videos Storage URI: Not set
  YouTube API Key: Set
Initializing Gemini Service with config: {
  projectId: 'fechen-aifactory',
  location: 'us-central1',
  model: 'gemini-2.5-flash',
  timeout: 60000
}
Vertex AI client initialized successfully
Attempting transcript extraction for video: Y20AZVzwpkQ
Checking transcript availability for video: Y20AZVzwpkQ
Found 1 caption track(s) available
Best caption track: zh-TW (standard)
Attempting caption download (likely to fail due to OAuth requirement)
Caption download requires OAuth 2.0 authentication (expected failure)
Caption content download failed (OAuth required) - this is expected behavior
No usable transcript content available for this video
Transcript not available, extracting enhanced metadata...
Extracting enhanced metadata for video: Y20AZVzwpkQ
Enhanced metadata extracted successfully
 POST / 200 in 694ms
Processing reference content with enhanced Gemini service
Source type: youtube
Has transcript: false
Description length: 727
Testing model availability: gemini-2.5-flash
Model gemini-2.5-flash responded in 1767ms with: HEALTHY
Gemini Health Check: {
  healthy: true,
  model: 'gemini-2.5-flash',
  region: 'us-central1',
  responseTime: 1768
}
Using enhanced description content
Content Complexity Analysis: {
  contentType: 'youtube_long_form',
  isShorts: false,
  shortsStyle: undefined,
  topicsComplexity: 'moderate',
  tokenAllocation: 6507,
  reasoning: 'Long-form YouTube video (23min) + +500 (moderate complexity) +7 (detailed description) = 6507 tokens'
}
Generating text with Gemini: {
  model: 'gemini-2.5-flash',
  promptLength: 3323,
  temperature: 0.3,
  maxTokens: 6507,
  timeout: 90000
}
Attempt 1/3 with model: gemini-2.5-flash
Generated text successfully in 24511ms: {
  textLength: 4126,
  textPreview: '```json\n' +
    '{\n' +
    '  "analysis": {\n' +
    '    "keyTopics": [\n' +
    '      "Sanchong real estate market analysis",\n' +
    '      "Ho...'
}
üîß Starting enhanced JSON parsing for AI response
Raw AI response length: 4126
First 200 chars: ```json
{
  "analysis": {
    "keyTopics": [
      "Sanchong real estate market analysis",
      "Housing price trends and market bubbles",
      "Identifying risky property types",
      "First-time 
‚úÖ Enhanced JSON parsing successful!
Repair attempts: 1
Parse time: 2ms
Content processing completed in 26287ms
 POST / 200 in 26309ms
Vertex AI Configuration:
  Project ID: fechen-aifactory
  Location: us-central1
  Veo Model: veo-001
  Gemini Model: gemini-pro
  GCS Videos Storage URI: Not set
  YouTube API Key: Set
Vertex AI Configuration:
  Project ID: fechen-aifactory
  Location: us-central1
  Veo Model: veo-001
  Gemini Model: gemini-pro
  GCS Videos Storage URI: Not set
  YouTube API Key: Set
üîç Debug tracking started for: generate-scenes
üìç Starting step: initialization
üé¨ Generating scenes with enhanced Gemini service
üåç Environment Information:
  Project ID: fechen-aifactory
  Location: us-central1
  Gemini Model: NOT SET
  Veo Model: veo-001
  Node Environment: development
  GCS Storage URI: NOT SET
  YouTube API Key: SET
‚ö†Ô∏è Environment warnings: [
  'GEMINI_MODEL is not set - will use default gemini-1.5-pro-002',
  'GCS_VIDEOS_STORAGE_URI is not set - video generation may fail'
]
üìä Configuration: {
  projectId: 'fechen-aifactory',
  location: 'us-central1',
  geminiModel: 'gemini-pro',
  pitchLength: 2608,
  numScenes: 8,
  style: 'Live-Action',
  language: 'English (United States)'
}
‚úÖ Completed step: initialization (1ms)
üìç Starting step: health-check
Testing model availability: gemini-2.5-flash
Model gemini-2.5-flash responded in 1609ms with: HEALTHY
üè• Gemini Health Check: {
  healthy: true,
  model: 'gemini-2.5-flash',
  region: 'us-central1',
  responseTime: 1609
}
‚úÖ Completed step: health-check (1610ms)
üìç Starting step: gemini-text-generation
üéØ Creating storyboard with Gemini...
Generating text with Gemini: {
  model: 'gemini-2.5-flash',
  promptLength: 7041,
  temperature: 1,
  maxTokens: 8192,
  timeout: 60000
}
Attempt 1/3 with model: gemini-2.5-flash
Generated text successfully in 37346ms: {
  textLength: 10625,
  textPreview: '```json\n' +
    '{\n' +
    '  "scenario": "Liam and Chloe, a couple in their 30s, are overwhelmed and exhausted by the...'
}
‚úÖ Gemini response received: {
  textLength: 10625,
  textPreview: '```json\n' +
    '{\n' +
    '  "scenario": "Liam and Chloe, a couple in their 30s, are overwhelmed and exhausted by the daunting search for a home in Sanchong. Their cramped apartment is a testament to their struggle, l...'
}
‚úÖ Completed step: gemini-text-generation (37348ms)
üìç Starting step: response-parsing
Cleaning JSON response, original length: 10625
Cleaned JSON length: 10383
JSON structure check - braces balanced: true
Failed to parse AI response, raw text: ```json
{
  "scenario": "Liam and Chloe, a couple in their 30s, are overwhelmed and exhausted by the daunting search for a home in Sanchong. Their cramped apartment is a testament to their struggle, littered with confusing real estate materials. They face frustrating open houses with pushy agents and conflicting information, leaving them feeling lost in a chaotic market. A moment of despair turns into a glimmer of hope when they discover 'The Navigator', an expert real estate agent, online. The 
üö® Error in response-parsing: Parse error: There was an issue processing the AI response.
Error parsing AI response: Error: Response Processing Error: There was an issue processing the AI response. Please try again.
    at generateScenes (webpack-internal:///(action-browser)/./app/actions/generate-scenes.ts:225:23)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418
    at async rk (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)
    at async r3 (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)
    at async doRender (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1427:30)
    at async cacheEntry.responseCache.get.routeKind (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:818:17)
    at async /Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/start-server.js:141:13)
‚ùå Completed step: response-parsing (14ms) - Response Processing Error: There was an issue processing the AI response. Please try again.
üö® Error in response-parsing: Response Processing Error: There was an issue processing the AI response. Please try again.
‚ùå Error generating scenes: Error: Unexpected Error: Something went wrong while processing your content. Please try again or contact support if the issue persists.
    at generateScenes (webpack-internal:///(action-browser)/./app/actions/generate-scenes.ts:253:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418
    at async rk (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)
    at async r3 (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)
    at async doRender (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1427:30)
    at async cacheEntry.responseCache.get.routeKind (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:818:17)
    at async /Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/start-server.js:141:13)
üö® Error in generate-scenes: Unexpected Error: Something went wrong while processing your content. Please try again or contact support if the issue persists.
üîÑ Unexpected error, creating fallback scenario: Error: Unexpected Error: Something went wrong while processing your content. Please try again or contact support if the issue persists.
    at generateScenes (webpack-internal:///(action-browser)/./app/actions/generate-scenes.ts:253:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418
    at async rk (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)
    at async r3 (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)
    at async doRender (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1427:30)
    at async cacheEntry.responseCache.get.routeKind (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:818:17)
    at async /Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/start-server.js:141:13)
üîÑ Creating fallback scenario due to unexpected error
üìç Starting step: fallback-scenario
Creating fallback scenario for pitch: The screen flickers to life, revealing LIAM (30s, earnest, slightly overwhelmed) and CHLOE (30s, pra
‚úÖ Completed step: fallback-scenario (0ms)
üîç Debug summary for generate-scenes: {
  totalTime: '38973ms',
  stepsCompleted: 5,
  errorsEncountered: 3,
  successRate: '80%'
}

üìä === DEBUG SUMMARY ===
Operation: generate-scenes
Total Time: 38973ms
Environment: fechen-aifactory/us-central1/not-set

‚ùå Errors encountered:
  1. response-parsing: Parse error: There was an issue processing the AI response.
  2. response-parsing: Response Processing Error: There was an issue processing the AI response. Please try again.
  3. generate-scenes: Unexpected Error: Something went wrong while processing your content. Please try again or contact support if the issue persists.

‚è±Ô∏è Step Performance:
  ‚úÖ initialization: 1ms
  ‚úÖ health-check: 1610ms
  ‚úÖ gemini-text-generation: 37348ms
  ‚ùå response-parsing: 14ms
  ‚úÖ fallback-scenario: 0ms
üìä === END SUMMARY ===

üîç Debug summary for generate-scenes: {
  totalTime: '38974ms',
  stepsCompleted: 5,
  errorsEncountered: 3,
  successRate: '80%'
}

üìä === DEBUG SUMMARY ===
Operation: generate-scenes
Total Time: 38974ms
Environment: fechen-aifactory/us-central1/not-set

‚ùå Errors encountered:
  1. response-parsing: Parse error: There was an issue processing the AI response.
  2. response-parsing: Response Processing Error: There was an issue processing the AI response. Please try again.
  3. generate-scenes: Unexpected Error: Something went wrong while processing your content. Please try again or contact support if the issue persists.

‚è±Ô∏è Step Performance:
  ‚úÖ initialization: 1ms
  ‚úÖ health-check: 1610ms
  ‚úÖ gemini-text-generation: 37348ms
  ‚ùå response-parsing: 14ms
  ‚úÖ fallback-scenario: 0ms
üìä === END SUMMARY ===

 POST / 200 in 39004ms
üîç Debug tracking started for: generate-scenes
üìç Starting step: initialization
üé¨ Generating scenes with enhanced Gemini service
üåç Environment Information:
  Project ID: fechen-aifactory
  Location: us-central1
  Gemini Model: NOT SET
  Veo Model: veo-001
  Node Environment: development
  GCS Storage URI: NOT SET
  YouTube API Key: SET
‚ö†Ô∏è Environment warnings: [
  'GEMINI_MODEL is not set - will use default gemini-1.5-pro-002',
  'GCS_VIDEOS_STORAGE_URI is not set - video generation may fail'
]
üìä Configuration: {
  projectId: 'fechen-aifactory',
  location: 'us-central1',
  geminiModel: 'gemini-pro',
  pitchLength: 2608,
  numScenes: 8,
  style: 'Live-Action',
  language: 'English (United States)'
}
‚úÖ Completed step: initialization (2ms)
üìç Starting step: health-check
Testing model availability: gemini-2.5-flash
Model gemini-2.5-flash responded in 1881ms with: HEALTHY
üè• Gemini Health Check: {
  healthy: true,
  model: 'gemini-2.5-flash',
  region: 'us-central1',
  responseTime: 1881
}
‚úÖ Completed step: health-check (1881ms)
üìç Starting step: gemini-text-generation
üéØ Creating storyboard with Gemini...
Generating text with Gemini: {
  model: 'gemini-2.5-flash',
  promptLength: 7041,
  temperature: 1,
  maxTokens: 8192,
  timeout: 60000
}
Attempt 1/3 with model: gemini-2.5-flash
Generated text successfully in 21409ms: {
  textLength: 9477,
  textPreview: '```json\n' +
    '{\n' +
    ' "scenario": "Liam and Chloe, a couple in their 30s, are exhausted by their futile search ...'
}
‚úÖ Gemini response received: {
  textLength: 9477,
  textPreview: '```json\n' +
    '{\n' +
    ' "scenario": "Liam and Chloe, a couple in their 30s, are exhausted by their futile search for a home in Sanchong. Their cramped rental apartment is a testament to their stress, cluttered wit...'
}
‚úÖ Completed step: gemini-text-generation (21410ms)
üìç Starting step: response-parsing
Cleaning JSON response, original length: 9477
Cleaned JSON length: 9425
JSON structure check - braces balanced: true
Failed to parse AI response, raw text: ```json
{
 "scenario": "Liam and Chloe, a couple in their 30s, are exhausted by their futile search for a home in Sanchong. Their cramped rental apartment is a testament to their stress, cluttered with real estate flyers and market data. They've faced endless frustration, most recently at a chaotic open house where a pushy agent offered little help. Feeling defeated, they stumble upon a glimmer of hope online: a video from 'The Navigator,' a professional real estate expert. The Navigator's calm,
üö® Error in response-parsing: Parse error: There was an issue processing the AI response.
Error parsing AI response: Error: Response Processing Error: There was an issue processing the AI response. Please try again.
    at generateScenes (webpack-internal:///(action-browser)/./app/actions/generate-scenes.ts:225:23)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418
    at async rk (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)
    at async r3 (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)
    at async doRender (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1427:30)
    at async cacheEntry.responseCache.get.routeKind (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:818:17)
    at async /Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/start-server.js:141:13)
‚ùå Completed step: response-parsing (3ms) - Response Processing Error: There was an issue processing the AI response. Please try again.
üö® Error in response-parsing: Response Processing Error: There was an issue processing the AI response. Please try again.
‚ùå Error generating scenes: Error: Unexpected Error: Something went wrong while processing your content. Please try again or contact support if the issue persists.
    at generateScenes (webpack-internal:///(action-browser)/./app/actions/generate-scenes.ts:253:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418
    at async rk (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)
    at async r3 (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)
    at async doRender (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1427:30)
    at async cacheEntry.responseCache.get.routeKind (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:818:17)
    at async /Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/start-server.js:141:13)
üö® Error in generate-scenes: Unexpected Error: Something went wrong while processing your content. Please try again or contact support if the issue persists.
üîÑ Unexpected error, creating fallback scenario: Error: Unexpected Error: Something went wrong while processing your content. Please try again or contact support if the issue persists.
    at generateScenes (webpack-internal:///(action-browser)/./app/actions/generate-scenes.ts:253:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418
    at async rk (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)
    at async r3 (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)
    at async doRender (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1427:30)
    at async cacheEntry.responseCache.get.routeKind (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/base-server.js:818:17)
    at async /Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/Users/shouian99/Desktop/macmbp/saas_app/storycraft-main/node_modules/next/dist/server/lib/start-server.js:141:13)
üîÑ Creating fallback scenario due to unexpected error
üìç Starting step: fallback-scenario
Creating fallback scenario for pitch: The screen flickers to life, revealing LIAM (30s, earnest, slightly overwhelmed) and CHLOE (30s, pra
‚úÖ Completed step: fallback-scenario (0ms)
üîç Debug summary for generate-scenes: {
  totalTime: '23297ms',
  stepsCompleted: 5,
  errorsEncountered: 3,
  successRate: '80%'
}

üìä === DEBUG SUMMARY ===
Operation: generate-scenes
Total Time: 23297ms
Environment: fechen-aifactory/us-central1/not-set

‚ùå Errors encountered:
  1. response-parsing: Parse error: There was an issue processing the AI response.
  2. response-parsing: Response Processing Error: There was an issue processing the AI response. Please try again.
  3. generate-scenes: Unexpected Error: Something went wrong while processing your content. Please try again or contact support if the issue persists.

‚è±Ô∏è Step Performance:
  ‚úÖ initialization: 2ms
  ‚úÖ health-check: 1881ms
  ‚úÖ gemini-text-generation: 21410ms
  ‚ùå response-parsing: 3ms
  ‚úÖ fallback-scenario: 0ms
üìä === END SUMMARY ===

üîç Debug summary for generate-scenes: {
  totalTime: '23298ms',
  stepsCompleted: 5,
  errorsEncountered: 3,
  successRate: '80%'
}

üìä === DEBUG SUMMARY ===
Operation: generate-scenes
Total Time: 23298ms
Environment: fechen-aifactory/us-central1/not-set

‚ùå Errors encountered:
  1. response-parsing: Parse error: There was an issue processing the AI response.
  2. response-parsing: Response Processing Error: There was an issue processing the AI response. Please try again.
  3. generate-scenes: Unexpected Error: Something went wrong while processing your content. Please try again or contact support if the issue persists.

‚è±Ô∏è Step Performance:
  ‚úÖ initialization: 2ms
  ‚úÖ health-check: 1881ms
  ‚úÖ gemini-text-generation: 21410ms
  ‚ùå response-parsing: 3ms
  ‚úÖ fallback-scenario: 0ms
üìä === END SUMMARY ===

 POST / 200 in 23332ms
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 2
   Average Response Time: 14449.00ms
   Error Rate: 0.00%
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 0
   Average Response Time: 0.00ms
   Error Rate: 0.00%
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 2
   Average Response Time: 13439.50ms
   Error Rate: 0.00%
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 2
   Average Response Time: 14449.00ms
   Error Rate: 0.00%
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 0
   Average Response Time: 0.00ms
   Error Rate: 0.00%
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 0
   Average Response Time: 0.00ms
   Error Rate: 0.00%
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 0
   Average Response Time: 0.00ms
   Error Rate: 0.00%
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 0
   Average Response Time: 0.00ms
   Error Rate: 0.00%
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 0
   Average Response Time: 0.00ms
   Error Rate: 0.00%
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 0
   Average Response Time: 0.00ms
   Error Rate: 0.00%
üìä Performance Summary:
   Overall Health: healthy
   Total Operations: 0
   Average Response Time: 0.00ms
   Error Rate: 0.00%
